<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Drawio 插件 | SumUP</title>
    <meta name="description" content="个人总结">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.Bv5CBvR1.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.Baenfrfz.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.BAno8eCW.js">
    <link rel="modulepreload" href="/assets/chunks/framework.Dfyg4WYq.js">
    <link rel="modulepreload" href="/assets/frontend_tools_expansion_drawio.md.I8KDgc_Z.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5a0eda5b><!--[--><!--]--><!--[--><span tabindex="-1" data-v-dc6918cf></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-dc6918cf>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5a0eda5b data-v-9d087d72><div class="VPNavBar" data-v-9d087d72 data-v-fc92308c><div class="wrapper" data-v-fc92308c><div class="container" data-v-fc92308c><div class="title" data-v-fc92308c><div class="VPNavBarTitle has-sidebar" data-v-fc92308c data-v-f9d89a8b><a class="title" href="/" data-v-f9d89a8b><!--[--><!--]--><!----><span data-v-f9d89a8b>SumUP</span><!--[--><!--]--></a></div></div><div class="content" data-v-fc92308c><div class="content-body" data-v-fc92308c><!--[--><!--]--><div class="VPNavBarSearch search" data-v-fc92308c><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-fc92308c data-v-d8c078b8><span id="main-nav-aria-label" class="visually-hidden" data-v-d8c078b8> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-d8c078b8 data-v-27614f31><!--[--><span data-v-27614f31>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/examples/index.html" tabindex="0" data-v-d8c078b8 data-v-27614f31><!--[--><span data-v-27614f31>例子</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-d8c078b8 data-v-485ec824><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-485ec824><span class="text" data-v-485ec824><!----><span data-v-485ec824>前端</span><span class="vpi-chevron-down text-icon" data-v-485ec824></span></span></button><div class="menu" data-v-485ec824><div class="VPMenu" data-v-485ec824 data-v-b667f9dc><div class="items" data-v-b667f9dc><!--[--><!--[--><div class="VPMenuLink" data-v-b667f9dc data-v-2d2f8788><a class="VPLink link" href="/frontend/tools/" data-v-2d2f8788><!--[--><span data-v-2d2f8788>工具集成</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b667f9dc data-v-a92561b1><p class="title" data-v-a92561b1>其他</p><!--[--><!--[--><div class="VPMenuLink" data-v-a92561b1 data-v-2d2f8788><a class="VPLink link" href="/frontend/other/wxapp.html" data-v-2d2f8788><!--[--><span data-v-2d2f8788>微信小程序</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d8c078b8 data-v-485ec824><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-485ec824><span class="text" data-v-485ec824><!----><span data-v-485ec824>后端</span><span class="vpi-chevron-down text-icon" data-v-485ec824></span></span></button><div class="menu" data-v-485ec824><div class="VPMenu" data-v-485ec824 data-v-b667f9dc><div class="items" data-v-b667f9dc><!--[--><!--[--><div class="VPMenuGroup" data-v-b667f9dc data-v-a92561b1><p class="title" data-v-a92561b1>java</p><!--[--><!--[--><div class="VPMenuLink" data-v-a92561b1 data-v-2d2f8788><a class="VPLink link" href="/server/java/basic/" data-v-2d2f8788><!--[--><span data-v-2d2f8788>java基础</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-fc92308c data-v-ef1e4ed8><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-ef1e4ed8 data-v-31aca636 data-v-3a82503b><span class="check" data-v-3a82503b><span class="icon" data-v-3a82503b><!--[--><span class="vpi-sun sun" data-v-31aca636></span><span class="vpi-moon moon" data-v-31aca636></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-fc92308c data-v-d7644505 data-v-cb5bb4af><!--[--><a class="VPSocialLink no-icon" href="https://gitee.com/dabai-pear" aria-label="gitee" target="_blank" rel="noopener" data-v-cb5bb4af data-v-0bf2bf84><span class="vpi-social-gitee"></span></a><a class="VPSocialLink no-icon" href="https://github.com/boatingPear" aria-label="github" target="_blank" rel="noopener" data-v-cb5bb4af data-v-0bf2bf84><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-fc92308c data-v-0303f766 data-v-485ec824><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-485ec824><span class="vpi-more-horizontal icon" data-v-485ec824></span></button><div class="menu" data-v-485ec824><div class="VPMenu" data-v-485ec824 data-v-b667f9dc><!----><!--[--><!--[--><!----><div class="group" data-v-0303f766><div class="item appearance" data-v-0303f766><p class="label" data-v-0303f766>Appearance</p><div class="appearance-action" data-v-0303f766><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-0303f766 data-v-31aca636 data-v-3a82503b><span class="check" data-v-3a82503b><span class="icon" data-v-3a82503b><!--[--><span class="vpi-sun sun" data-v-31aca636></span><span class="vpi-moon moon" data-v-31aca636></span><!--]--></span></span></button></div></div></div><div class="group" data-v-0303f766><div class="item social-links" data-v-0303f766><div class="VPSocialLinks social-links-list" data-v-0303f766 data-v-cb5bb4af><!--[--><a class="VPSocialLink no-icon" href="https://gitee.com/dabai-pear" aria-label="gitee" target="_blank" rel="noopener" data-v-cb5bb4af data-v-0bf2bf84><span class="vpi-social-gitee"></span></a><a class="VPSocialLink no-icon" href="https://github.com/boatingPear" aria-label="github" target="_blank" rel="noopener" data-v-cb5bb4af data-v-0bf2bf84><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-fc92308c data-v-357d68a2><span class="container" data-v-357d68a2><span class="top" data-v-357d68a2></span><span class="middle" data-v-357d68a2></span><span class="bottom" data-v-357d68a2></span></span></button></div></div></div></div><div class="divider" data-v-fc92308c><div class="divider-line" data-v-fc92308c></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5a0eda5b data-v-5831f312><div class="container" data-v-5831f312><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-5831f312><span class="vpi-align-left menu-icon" data-v-5831f312></span><span class="menu-text" data-v-5831f312>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-5831f312 data-v-1ed5a493><button data-v-1ed5a493>返回顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-5a0eda5b data-v-f3ae680b><div class="curtain" data-v-f3ae680b></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-f3ae680b><span class="visually-hidden" id="sidebar-aria-label" data-v-f3ae680b> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-f702f473><section class="VPSidebarItem level-0" data-v-f702f473 data-v-e9f704ee><!----><div class="items" data-v-e9f704ee><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e9f704ee data-v-e9f704ee><div class="item" data-v-e9f704ee><div class="indicator" data-v-e9f704ee></div><a class="VPLink link link" href="/frontend/tools/" data-v-e9f704ee><!--[--><p class="text" data-v-e9f704ee>介绍</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e9f704ee data-v-e9f704ee><div class="item" data-v-e9f704ee><div class="indicator" data-v-e9f704ee></div><a class="VPLink link link" href="/frontend/tools/typewriting/" data-v-e9f704ee><!--[--><p class="text" data-v-e9f704ee>打字录入</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-f702f473><section class="VPSidebarItem level-0 has-active" data-v-f702f473 data-v-e9f704ee><div class="item" role="button" tabindex="0" data-v-e9f704ee><div class="indicator" data-v-e9f704ee></div><h2 class="text" data-v-e9f704ee>扩展模块</h2><!----></div><div class="items" data-v-e9f704ee><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e9f704ee data-v-e9f704ee><div class="item" data-v-e9f704ee><div class="indicator" data-v-e9f704ee></div><a class="VPLink link link" href="/frontend/tools/expansion/drawio.html" data-v-e9f704ee><!--[--><p class="text" data-v-e9f704ee>Drawio插件</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5a0eda5b data-v-a2e3bae0><div class="VPDoc has-sidebar has-aside" data-v-a2e3bae0 data-v-c30d09a0><!--[--><!--]--><div class="container" data-v-c30d09a0><div class="aside" data-v-c30d09a0><div class="aside-curtain" data-v-c30d09a0></div><div class="aside-container" data-v-c30d09a0><div class="aside-content" data-v-c30d09a0><div class="VPDocAside" data-v-c30d09a0 data-v-f9f4182a><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-f9f4182a data-v-3f90ac10><div class="content" data-v-3f90ac10><div class="outline-marker" data-v-3f90ac10></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-3f90ac10>当前页大纲</div><ul class="VPDocOutlineItem root" data-v-3f90ac10 data-v-fd2802ef><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-f9f4182a></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-c30d09a0><div class="content-container" data-v-c30d09a0><!--[--><!--]--><main class="main" data-v-c30d09a0><div style="position:relative;" class="vp-doc _frontend_tools_expansion_drawio" data-v-c30d09a0><div><h1 id="drawio-插件" tabindex="-1">Drawio 插件 <a class="header-anchor" href="#drawio-插件" aria-label="Permalink to &quot;Drawio 插件&quot;">​</a></h1><h2 id="集成流程" tabindex="-1">集成流程 <a class="header-anchor" href="#集成流程" aria-label="Permalink to &quot;集成流程&quot;">​</a></h2><h3 id="安装依赖包" tabindex="-1">安装依赖包 <a class="header-anchor" href="#安装依赖包" aria-label="Permalink to &quot;安装依赖包&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> drawio-embed</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="添加工具函数" tabindex="-1">添加工具函数 <a class="header-anchor" href="#添加工具函数" aria-label="Permalink to &quot;添加工具函数&quot;">​</a></h3><p>在 src\frame\utils 目录下创建 <code>useDrawio.ts</code> 文件，复制以下代码到文件中</p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { onDeactivated } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> drawioEmbed </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;drawio-embed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ElMessage } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;element-plus&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> defaultOpenDrawio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> isLoaded </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useDrawio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  updated</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">png</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">svg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">png</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">svg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    png: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    svg: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> drawioImageCreatedEventHandler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">evt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">imageContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">imageType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> evt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (imageType </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      data.png </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> imageContent;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (imageType </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;svg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      data.svg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> imageContent;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      updated</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> drawioLoadedHandler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (isLoaded </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">defaultOpenDrawio) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    defaultOpenDrawio </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> drawioEmbed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(url);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 监听返回的图片数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;drawioLoaded&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, drawioLoadedHandler);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;drawioImageCreated&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, drawioImageCreatedEventHandler);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  onDeactivated</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;drawioImageCreated&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      drawioImageCreatedEventHandler</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;drawioLoaded&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, drawioLoadedHandler);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> openDrawio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">_</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        defaultOpenDrawio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(content).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          ElMessage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">warning</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;编辑器还在初始化中，请稍后再打开...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">          reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;编辑器还在初始化中，请稍后再打开...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  openDrawio.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isLoaded</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> defaultOpenDrawio.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isLoaded</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> isLoaded;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  openDrawio.isOpen </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> defaultOpenDrawio.isOpen;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  openDrawio.close </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> defaultOpenDrawio.close;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    openDrawio,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><h3 id="添加静态资源" tabindex="-1">添加静态资源 <a class="header-anchor" href="#添加静态资源" aria-label="Permalink to &quot;添加静态资源&quot;">​</a></h3><p><a href="http://suitex.nomax.in/download/drawio/webapp.zip" target="_blank" rel="noreferrer">下载</a>静态资源文件，解压后放在 public 文件夹下</p><p>目录结构如下所示：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>├─api_build							# 根据后端接口生成前端API接口脚本目录</span></span>
<span class="line"><span>├─dist								# 通过命令npm run build打包输出目录</span></span>
<span class="line"><span>├─node_modules						# 通过命令npm install安装依赖产生目录</span></span>
<span class="line"><span>├─public							# 存放静态资源目录</span></span>
<span class="line"><span>│   └─webapp						# drawio 静态资源</span></span>
<span class="line"><span>│      ├─connect</span></span>
<span class="line"><span>│      ├─images</span></span>
<span class="line"><span>│      ├─index.html</span></span>
<span class="line"><span>│      └─...(其他文件)</span></span>
<span class="line"><span>├─.env								# 环境配置参数</span></span>
<span class="line"><span>├─.env.development					# 开发环境配置参数</span></span>
<span class="line"><span>├─.env.production					# 打包环境配置参数</span></span>
<span class="line"><span>├─package.json						# npm 命令定义，依赖包管理</span></span>
<span class="line"><span>├─package-lock.json					# 依赖包版本锁定文件</span></span>
<span class="line"><span>├─tsconfig.json               		# TypeScript 配置文件，定义编译选项</span></span>
<span class="line"><span>├─vite.config.ts              		# Vite 配置文件，定义构建、开发服务器、插件等</span></span>
<span class="line"><span>└─uno.config.ts              		# Uno CSS 配置文件</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="富文本编辑器扩展" tabindex="-1">富文本编辑器扩展 <a class="header-anchor" href="#富文本编辑器扩展" aria-label="Permalink to &quot;富文本编辑器扩展&quot;">​</a></h3><p>下面是个集成到 tinymce 富文本编辑器的 demo 示例步骤和效果预览</p><p><img src="/assets/QQ2026116-17243.BLAD3_Xr.gif" alt="上方demo代码效果预览"></p><ol><li>在 src\frame\components\Editor\TinymceEditor 目录下创建 drawio-plugin.ts 插件声明文件</li></ol><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tinymce </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;tinymce/tinymce&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> useDrawio </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@/frame/utils/useDrawio&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> base </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SUITEX_BASE_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SUITEX_BASE_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tinymce.PluginManager.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;drawio&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">editor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> currentTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">openDrawio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useDrawio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">base</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/webapp/index.html?embed=1&amp;dev=1&amp;libraries=1`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (data.png </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data.svg) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (currentTime) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> tempDiv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;div&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          tempDiv.innerHTML </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tinymce.activeEditor?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">??</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> img</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tempDiv.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`img[data-time=&quot;${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">currentTime</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}&quot;]`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          img</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setAttribute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data.png);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          img</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setAttribute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;data-svg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            btoa</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unescape</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">encodeURIComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data.svg)))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          );</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          editor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">insertContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(img</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.outerHTML);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> imgContent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `&lt;img src=&quot;${</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            data</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">png</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          }&quot; data-type=&quot;drawio-svg&quot; data-time=&quot;${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Date</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">()</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}&quot; data-svg=&quot;${</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">btoa</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            unescape</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">encodeURIComponent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">svg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">))</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          )</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}&quot; alt=&quot;流程图&quot;&gt;`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          editor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">insertContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imgContent);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          currentTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  editor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dblclick&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> node</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> editor.selection.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> node.tagName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;IMG&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> node.dataset.svg) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      openDrawio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">decodeURIComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">escape</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">atob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(node.dataset.svg))));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      currentTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> node.dataset.time;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  editor.ui.registry.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addIcon</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;drawio&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;&lt;svg width=&quot;24&quot; height=&quot;24&quot; t=&quot;1764928533463&quot; class=&quot;icon&quot; viewBox=&quot;0 0 1024 1024&quot; version=&quot;1.1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; p-id=&quot;29469&quot; width=&quot;200&quot; height=&quot;200&quot;&gt;&lt;path d=&quot;M810.528 640l-224.032-256H640V128h-256v256h53.504l-224.032 256H128v256h256v-256H298.496L512 396.032 725.504 640H640v256h256v-256z&quot; fill=&quot;#2c2c2c&quot; p-id=&quot;29470&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  editor.ui.registry.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addToggleButton</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;drawio&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    icon: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;drawio&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    tooltip: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;draw.io&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    onAction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> node</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> editor.selection.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> node.tagName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;IMG&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> node.dataset.svg) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        openDrawio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">decodeURIComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">escape</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">atob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(node.dataset.svg))));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        currentTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> node.dataset.time;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        openDrawio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        currentTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    onSetup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">api</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> unbindSelectorChanged</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> editor.selection.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">selectorChangedWithUnbind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;img:not([data-mce-object]):not([data-mce-placeholder]),img[data-svg],figure.image,figure.image[data-svg]&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        api.setActive</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ).unbind;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> unbindEditable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> nodeChanged</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          api.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setEnabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(editor.selection.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEditable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        editor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;NodeChange&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, nodeChanged);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        nodeChanged</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          editor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">off</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;NodeChange&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, nodeChanged);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        unbindSelectorChanged</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        unbindEditable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    getMetadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;draw.io&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        author: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nomax&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        origin: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br></div></div><ol start="2"><li>添加定义的 drawio-plugin.ts 插件引用</li></ol><p><img src="/assets/image-20260116171240938.D20gOEzU.png" alt="image-20260116171240938"></p><ol start="3"><li>在使用时配置添加<code>plugins=&quot;| drawio&quot; toolbar=&quot; drawio&quot;</code>即可</li></ol><p><img src="/assets/image-20260116171909160.CH1ERD0K.png" alt="image-20260116171909160"></p><h2 id="自定义绘图面板" tabindex="-1">自定义绘图面板 <a class="header-anchor" href="#自定义绘图面板" aria-label="Permalink to &quot;自定义绘图面板&quot;">​</a></h2><h3 id="自定义左侧图形集合区域" tabindex="-1">自定义左侧图形集合区域 <a class="header-anchor" href="#自定义左侧图形集合区域" aria-label="Permalink to &quot;自定义左侧图形集合区域&quot;">​</a></h3><p><img src="/assets/image-20260116144847799.Djrr1_YB.png" alt="image-20260116144847799"></p><ul><li><p>public\webapp\js\diagramly\sidebar\Sidebar.js</p><ul><li><strong>Sidebar.prototype.defaultEntries</strong>的<strong>general</strong>项同时控制通用、杂项和高级三项 <img src="/assets/image-20260116150207450.q2u2gMjS.png" alt="image-20260116150207450"></li><li><strong>initPalettes</strong>方法中 注释对应的方法可以隐藏或添加对应图形集合 <img src="/assets/image-20260116151321212.ZDSf8q0A.png" alt="image-20260116151321212"></li></ul></li><li><p>public\webapp\js\grapheditor\Sidebar.js</p><ul><li>注释下方代码可以隐藏左侧图形集合区的更多图形按钮 <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOMAAAAsCAIAAAAYUph6AAAEZUlEQVR4nO2cP2gieRTHv2tEzr2wYGDBBPbMwiZlUqQRlhwWFmlSHcGRkGpJYdKIsDCFXqOFIAQbM0VKkRgs01hYBGQhTYqd4gqzxeaOiy4pZHdz6yGJXDH/jaMxl91xfvM+lZmZzLzf+Jn3e+8nzJPPX69BEBPDp+blzMzM3e2uHx8KQTwAMpWwB2QqYQ/IVMIekKmEPSBTCXvgtjqAR6PTc7W6nuubqZ7VkUwCLmDafev3dL0uRu4HIzm103N9+Ob9Qpoq9IAvN1Mfvnk7PUa+YkaG0ep6yNG79IBW12N1FI8DI6Ze30xZHcKEwsydYcRUSqhmMHNnGDGVYB4ylbAHZCphD8hUwh6QqYQ9YOc3qnE4rXC8iIW1/MFrv8khraP9uNAceab5WCIb8Wl/N9/x0epHYDWb3g3eOVrZO5TZzcOd9YsKx4uDd80CwFkmlcNWObk4MkJWcKap98Af2SlH9Bvax9t7pfOltycbK2b/c6rpVedTdd0eg7jhrXJyUbbW+LScZVK5GgAguFE+nOOjVcQS2QgMl9auUjt+syiJ6wDIVHMGpVUxF9JSnS6hSh4D0KvcKISKdQALa7/15Vc1uZ5X46GqeraNERHJJ+xP5I7AQaaqMinoLBk8WRt2tU0Sm66WyF7GeTG3PZc/eO1XDhhgVa3ISYlTns0bhVDxr1giG/GdZYYPYXH3JL073qiZwUGmPhDjPG7IqTLBjfKJnA3zsau4oDwAYZM6Utp+WuF4sRRNlQAAq4GxcqT81DkpuZKpoxidUwEYS4X52NoLoVqvFbmLQU2bllOlszUKoWJfXasVrMIeJ0jbxFxInI8lsr/+IVUOTtIUjjLVt36QXpc+3qP3vz+qo5LTraP9uKA0+H0FRgCAIadKGXo1my4HAZ2gK8l0OVzheHHe2FEhk+IE82zNMg4y9YGMnP2VVYL28XaK4wEsvT3ZUZoqpTgOb+0GAX17JtcMSkK9I1/r4grAi4APaKsbV5LpclL62CiE3geHLESwBplqjj+yk8d+XIDa99TVNGyY/ZUeH0ubsauSIOYyy9o61KBpWl8qqAm1j7/Pm8DsL4GBoclXrEsXcgTONFXXAw3HH4lu1vZK0dSf4aU6gMBz/4AzGFryufNUTq1ETQoM3WJtoxBKcQCA1WxaM7b5rlID8HxuwHKprOmQ9QoWcaap41OviQBQK/IL5n2MPtEOKYK1jsp4Ca3MaB//Xv0IILzcN7kryVj7scoxkKkmaN23fvo+rXC82owDAMJb+YWafiofnefM+yHlor71gwS2D/HGcNjl0X5OaDqs5Vd5wsYb1N5f/2x1CJPL8vQ/VocwBvQGNcLekKmEPSBTCXvAiKmMDOM7wMydYWQg0+5bq0OYUJi5M4yY6vd0GRnJo+IC/J6u1VE8Dox8v15X79XTzjP3LSPj+d+4gGfu21dPO8y8QY2dlX+vq/fyp3+tjoL4XlAOIuwBmUrYAzKVsAdkKmEPyFTCHpCphD34D1S8/WjifYbeAAAAAElFTkSuQmCC" alt="image-20260116151743525"><img src="/assets/image-20260116151613275.DpmNcWAp.png" alt="image-20260116151613275"></li></ul></li><li><p>public\webapp\js\diagramly\EditorUi.js</p><ul><li>隐藏全局的便笺本修改下面的方法，始终返回 false<img src="data:image/png;base64,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" alt="image-20260116163503353"><img src="/assets/image-20260116163251552.BSIpuh6F.png" alt="image-20260116163251552"></li></ul></li></ul><h3 id="自定义顶部工具栏菜单项" tabindex="-1">自定义顶部工具栏菜单项 <a class="header-anchor" href="#自定义顶部工具栏菜单项" aria-label="Permalink to &quot;自定义顶部工具栏菜单项&quot;">​</a></h3><p><img src="/assets/image-20260116152412177.7yfYbC5d.png" alt="image-20260116152412177"></p><ul><li><p>public\webapp\js\grapheditor\Menus.js <img src="/assets/image-20260116152631334.uJVbbHCw.png" alt="image-20260116152631334"></p></li><li><p>如果想要隐藏整个工具栏可以注释下方代码 <img src="/assets/image-20260116152846646.CYkC5S0_.png" alt="image-20260116152846646"></p></li></ul><h3 id="自定义图形集" tabindex="-1">自定义图形集 <a class="header-anchor" href="#自定义图形集" aria-label="Permalink to &quot;自定义图形集&quot;">​</a></h3><p><img src="data:image/png;base64,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" alt="image-20260116154151796"></p><ul><li><p>创建自定义图形的文件，文件名称格式为 Sidebar-自定义.js</p><p><img src="/assets/image-20260116154614631.D6b6nFiJ.png" alt="image-20260116154912275"></p></li><li><p>下方是文件的实例代码</p></li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  Sidebar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addExamPalette</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> w </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> h </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setCurrentSearchEntryLibrary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;exam&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 对 SVG 进行 URL 编码</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getEncodeSvg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">svgString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;data:image/svg+xml,&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        encodeURIComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(svgString)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%27&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%22&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%3C&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%3E&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">#</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%23&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addPaletteFunctions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;exam&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, mxResources.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;exam&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createVertexTemplateEntry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;shape=image;image=&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">          getEncodeSvg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;&lt;svg t=&quot;1764902290520&quot; class=&quot;icon&quot; viewBox=&quot;0 0 1024 1024&quot; version=&quot;1.1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; p-id=&quot;2433&quot; width=&quot;200&quot; height=&quot;200&quot;&gt;&lt;path d=&quot;M663.258091 0.064624a35.19118 35.19118 0 0 1 15.932007 3.839038l1.535615 0.831791a39.286154 39.286154 0 0 1 4.606846 3.135214l0.575855 0.511872 1.599599 1.471631 233.605453 233.605453 0.703824 0.767808-1.407648-1.471632 1.919519 2.111471 0.767808 0.95976a45.236663 45.236663 0 0 1 2.047487 2.815294l0.831791 1.343663 0.831792 1.535615a34.679308 34.679308 0 0 1 3.839038 15.932007v709.582161a46.516342 46.516342 0 0 1-46.516342 46.516342H139.741297a46.516342 46.516342 0 0 1-46.516342-46.516342V46.580966a46.516342 46.516342 0 0 1 46.516342-46.516342zM581.806505 69.871129H163.03146v884.06643h698.001064V349.033164H628.386831a46.516342 46.516342 0 0 1-46.516342-46.516342z m-34.871261 604.904395a34.87126 34.87126 0 1 1 0 69.806505H360.805893a34.87126 34.87126 0 1 1 0-69.806505z m120.225869-209.419514a35.127196 35.127196 0 0 1 0 69.806505H356.902871a35.127196 35.127196 0 0 1 0-69.806505z m-15.548104-392.733571v206.60422h206.60422z&quot; p-id=&quot;2434&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          ) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &quot;;aspect=fixed;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        w,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        h,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;自定义svg图标&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setCurrentSearchEntryLibrary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><ul><li><p>创建完成后需要在上图中添加调用 <img src="/assets/image-20260116155227413.D63c-hIE.png" alt="image-20260116155227413"></p></li><li><p>添加加载文件 <img src="/assets/image-20260116155430445.DG_b9bHJ.png" alt="image-20260116155430445"></p></li><li><p>如果需要配置多语言可以在下方添加 <img src="/assets/image-20260116155929460.oy0XDDYP.png" alt="image-20260116155929460"></p></li></ul><h2 id="usedrawio" tabindex="-1">useDrawio <a class="header-anchor" href="#usedrawio" aria-label="Permalink to &quot;useDrawio&quot;">​</a></h2><h3 id="参数-url-updated" tabindex="-1">参数: [url, updated] <a class="header-anchor" href="#参数-url-updated" aria-label="Permalink to &quot;参数: [url, updated]&quot;">​</a></h3><ul><li><code>url: string</code><ul><li>drawio 前端项目的静态地址，地址 webapp/index.html?embed=1&amp;dev=1&amp;libraries=1</li><li>embed=1；表示嵌入模式</li><li>dev=1；使用开发环境代码--如果修改的自定义代码才有效</li><li>libraries=1； 指定嵌入模式下是否启用库</li><li>更多参数请查看官方文档 <a href="https://www.drawio.com/doc/faq/embed-mode" target="_blank" rel="noreferrer">drawio 嵌入模式</a></li><li>drawio 前端项目的下载地址为：<a href="https://github.com/jgraph/drawio/tree/dev/src/main/webapp" target="_blank" rel="noreferrer">webapp</a></li><li>只使用 webapp 目录，放在 public 目录下</li></ul></li><li><code>updated: (data: { png: string; svg: string }) =&gt; void</code><ul><li>在绘制面板中，进行保存操作后，会调用当前回调函数</li><li>函数的形参为保存时，绘制面板上绘制图形的整体图像数据，同时有 base64 的 png 图像数据和 svg 的矢量图数据(可以回显在绘图面板)</li></ul></li></ul><h3 openDrawio="" id="返回值" tabindex="-1">返回值: <a class="header-anchor" href="#返回值" aria-label="Permalink to &quot;返回值: { openDrawio }&quot;">​</a></h3><ul><li><code>openDrawio: (content?: string) =&gt; void</code></li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openDrawio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;svg&gt;...&lt;/svg&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 注：这里的 svg 图片须为通过本项目导出的 svg，而非任意 svg。</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>打开绘图面板的方法，形参为回显在绘图面板中的图形数据，svg 的矢量图字符串</p></blockquote><ul><li><p>openDrawio 不止有调用栈，还有方法</p><ul><li><code>openDrawio.isLoaded()</code> 返回值为布尔值；判断编辑器是否加载成功</li><li><code>openDrawio.isOpen()</code> 返回值为布尔值；判断绘制面板是否打开</li><li><code>openDrawio.close()</code> 主动关闭绘制面板</li></ul></li></ul><h3 id="示例" tabindex="-1">示例 <a class="header-anchor" href="#示例" aria-label="Permalink to &quot;示例&quot;">​</a></h3><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">openDrawio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useDrawio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">base</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/webapp/index.html?embed=1&amp;dev=1&amp;libraries=1`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// url部分的参数解释</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// embed=1:客户端将在嵌入模式下运行</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// dev=1:使用开发模式的代码</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// libraries=1:指定嵌入模式下是否启用库。默认为禁用（0）</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>更多更详细信息请查看官方文档：<a href="https://www.drawio.com/doc/faq/embed-mode" target="_blank" rel="noreferrer">drawio 文档</a></p><h3 id="尝试打开一个尚未加载好的编辑器" tabindex="-1">尝试打开一个尚未加载好的编辑器 <a class="header-anchor" href="#尝试打开一个尚未加载好的编辑器" aria-label="Permalink to &quot;尝试打开一个尚未加载好的编辑器&quot;">​</a></h3><p>编辑器初始化需要一定的时间，如果过早的调用 <code>openDrawio()</code> 打开，可能实际无法打开，原因有：</p><ol><li>流程图的网络资源还在加载</li><li>流程图的内部初始化尚未结束</li></ol><h3 id="关闭流程图编辑器" tabindex="-1">关闭流程图编辑器 <a class="header-anchor" href="#关闭流程图编辑器" aria-label="Permalink to &quot;关闭流程图编辑器&quot;">​</a></h3><p>通常，用户在编辑时，如果点击了「保存」或者「取消」按钮，会自动关闭编辑器。当然我们也可以主动控制其关闭</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>openDrawio.close();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>参考文档：</p><ol><li><a href="https://github.com/imaoda/drawio-embed" target="_blank" rel="noreferrer">drawio-embed</a></li></ol><p>如果需要对绘制面板自定义请参考下方文档：</p><ol><li><a href="https://blog.csdn.net/m0_66509866/article/details/138150894" target="_blank" rel="noreferrer">Drawio 二次开发与接入 Vue 项目</a></li></ol></blockquote></div></div></main><footer class="VPDocFooter" data-v-c30d09a0 data-v-22409368><!--[--><!--[--><!--[--><!--[--><div class="back-top-container" style="display:none;" data-v-e9e1f3dd><svg class="progress-ring" viewBox="0 0 100 100" data-v-e9e1f3dd><circle class="progress-ring-background" cx="50" cy="50" r="42" data-v-e9e1f3dd></circle><circle class="progress-ring-circle" cx="50" cy="50" r="42" style="stroke-dashoffset:263.89378290154264;" data-v-e9e1f3dd></circle></svg><div class="vitepress-backTop-main" title="返回顶部" data-v-e9e1f3dd><svg class="icon" viewBox="0 0 1024 1024" data-v-e9e1f3dd><path d="M752.736 431.063C757.159 140.575 520.41 8.97 504.518 0.41V0l-0.45 0.205-0.41-0.205v0.41c-15.934 8.56-252.723 140.165-248.259 430.653-48.21 31.457-98.713 87.368-90.685 184.074 8.028 96.666 101.007 160.768 136.601 157.287 35.595-3.482 25.232-30.31 25.232-30.31l12.206-50.095s52.47 80.569 69.304 80.528c15.114-1.23 87-0.123 95.6 0h0.82c8.602-0.123 80.486-1.23 95.6 0 16.794 0 69.305-80.528 69.305-80.528l12.165 50.094s-10.322 26.83 25.272 30.31c35.595 3.482 128.574-60.62 136.602-157.286 8.028-96.665-42.475-152.617-90.685-184.074z m-248.669-4.26c-6.758-0.123-94.781-3.359-102.891-107.192 2.95-98.714 95.97-107.438 102.891-107.93 6.964 0.492 99.943 9.216 102.892 107.93-8.11 103.833-96.174 107.07-102.892 107.192z m-52.019 500.531c0 11.838-9.42 21.382-21.012 21.382a21.217 21.217 0 0 1-21.054-21.34V821.74c0-11.797 9.421-21.382 21.054-21.382 11.591 0 21.012 9.585 21.012 21.382v105.635z m77.333 57.222a21.504 21.504 0 0 1-21.34 21.626 21.504 21.504 0 0 1-21.34-21.626V827.474c0-11.96 9.543-21.668 21.299-21.668 11.796 0 21.38 9.708 21.38 21.668v157.082z m71.147-82.043c0 11.796-9.42 21.34-21.053 21.34a21.217 21.217 0 0 1-21.013-21.34v-75.367c0-11.755 9.421-21.299 21.013-21.299 11.632 0 21.053 9.544 21.053 21.3v75.366z" fill="#FFF" data-v-e9e1f3dd></path></svg></div></div><!--]--><!--]--><!--]--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-22409368><span class="visually-hidden" id="doc-footer-aria-label" data-v-22409368>Pager</span><div class="pager" data-v-22409368><a class="VPLink link pager-link prev" href="/frontend/tools/typewriting/" data-v-22409368><!--[--><span class="desc" data-v-22409368>上一页</span><span class="title" data-v-22409368>打字录入</span><!--]--></a></div><div class="pager" data-v-22409368><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"examples_idea_index.md\":\"fgKacJGf\",\"examples_index.md\":\"C-n5dbd6\",\"frontend_other_wxapp_index.md\":\"MjcxipCm\",\"frontend_other_wxapp_wxmlscreenshot_index.md\":\"CO6vqIJV\",\"frontend_tools_expansion_drawio.md\":\"I8KDgc_Z\",\"frontend_tools_index.md\":\"CoMZEW2Q\",\"frontend_tools_typewriting_index.md\":\"sbJfvkmn\",\"index.md\":\"DDKIyHG4\",\"server_java_basic_index.md\":\"Cxh0e2h9\",\"server_java_basic_intermediate_objectoriented_index.md\":\"DkPNcfJU\",\"server_java_basic_primary_array_index.md\":\"BKEHvW84\",\"server_java_basic_primary_controlstatement_index.md\":\"CMOe89fu\",\"server_java_basic_primary_grammar_index.md\":\"JntBiM_k\",\"server_java_basic_primary_ideacodetool_index.md\":\"DSr1kKch\",\"server_java_basic_primary_keyword_index.md\":\"B-b_Ymmd\",\"server_java_basic_primary_operatorexpression_index.md\":\"ygP8jp2K\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"SumUP\",\"description\":\"个人总结\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"例子\",\"link\":\"/examples/index\"},{\"text\":\"前端\",\"activeMatch\":\"/frontend/\",\"items\":[{\"text\":\"工具集成\",\"link\":\"/frontend/tools/\"},{\"text\":\"其他\",\"activeMatch\":\"/frontend/other/\",\"items\":[{\"text\":\"微信小程序\",\"link\":\"/frontend/other/wxapp\"}]}]},{\"text\":\"后端\",\"activeMatch\":\"/server/\",\"items\":[{\"text\":\"java\",\"activeMatch\":\"/server/java/\",\"items\":[{\"text\":\"java基础\",\"link\":\"/server/java/basic/\"}]}]}],\"sidebar\":{\"/guide/\":[{\"text\":\"开始\",\"collapsed\":false,\"items\":[{\"text\":\"框架介绍\",\"link\":\"/guide/index\"},{\"text\":\"快速开始\",\"link\":\"/guide/quick-start\"},{\"text\":\"Git仓库配置\",\"link\":\"/guide/git\"}]},{\"text\":\"suitex-services\",\"collapsed\":false,\"items\":[{\"text\":\"事务控制\",\"link\":\"/guide/services/transactional\"},{\"text\":\"dao层\",\"link\":\"/guide/services/dao\"},{\"text\":\"文件存储\",\"link\":\"/guide/services/file\"}]},{\"text\":\"suitex-webui\",\"collapsed\":false,\"items\":[{\"text\":\"目录结构\",\"link\":\"/guide/webui/directory-structure\"},{\"text\":\"配置参数\",\"link\":\"/guide/webui/config\"},{\"text\":\"路由和菜单\",\"link\":\"/guide/webui/router\"},{\"text\":\"构建和部署\",\"link\":\"/guide/webui/build\"},{\"text\":\"自定义\",\"link\":\"/guide/webui/custom\"},{\"text\":\"客户化\",\"link\":\"/guide/webui/customization\"},{\"text\":\"脚本\",\"link\":\"/guide/webui/scripts\"},{\"text\":\"表单布局\",\"link\":\"/guide/webui/layout\"},{\"text\":\"组件\",\"link\":\"/guide/webui/components\"},{\"text\":\"权限\",\"link\":\"/guide/webui/auth\"},{\"text\":\"公共\",\"link\":\"/guide/webui/utils\"}]},{\"text\":\"suitex-mobileui\",\"collapsed\":false,\"items\":[{\"text\":\"目录结构\",\"link\":\"/guide/mobileui/directory-structure\"},{\"text\":\"配置参数\",\"link\":\"/guide/mobileui/config\"},{\"text\":\"路由和菜单\",\"link\":\"/guide/mobileui/router\"},{\"text\":\"构建和部署\",\"link\":\"/guide/mobileui/build\"},{\"text\":\"自定义\",\"link\":\"/guide/mobileui/custom\"},{\"text\":\"脚本\",\"link\":\"/guide/mobileui/scripts\"},{\"text\":\"组件\",\"link\":\"/guide/mobileui/components\"},{\"text\":\"公共\",\"link\":\"/guide/mobileui/utils\"}]},{\"text\":\"开发规范\",\"collapsed\":false,\"items\":[{\"text\":\"数据库\",\"link\":\"/guide/standard/database\"},{\"text\":\"前端\",\"link\":\"/guide/standard/frontend\"}]},{\"text\":\"其他\",\"collapsed\":false,\"items\":[{\"text\":\"常见问题\",\"link\":\"/guide/faq\"},{\"text\":\"版本发布\",\"link\":\"/guide/release\"}]}],\"/module/\":[{\"text\":\"介绍\",\"collapsed\":false,\"link\":\"/module/index\"},{\"text\":\"suitex-webui\",\"collapsed\":false,\"items\":[{\"text\":\"静态路由\",\"link\":\"/module/webui/staticRoutes\"},{\"text\":\"工作台\",\"link\":\"/module/webui/dashboard\"},{\"text\":\"个人中心\",\"link\":\"/module/webui/userCenter\"},{\"text\":\"开发帮助\",\"link\":\"/module/webui/devHelp\"},{\"text\":\"平台管理\",\"link\":\"/module/webui/platformMng\"},{\"text\":\"系统管理\",\"link\":\"/module/webui/systemMng\"}]},{\"text\":\"扩展模块\",\"collapsed\":false,\"items\":[{\"text\":\"Drawio 插件\",\"link\":\"/module/expansion/drawio\"},{\"text\":\"发送短信\",\"link\":\"/module/expansion/nsms\"},{\"text\":\"发送邮件\",\"link\":\"/module/expansion/mail\"},{\"text\":\"单点登录\",\"link\":\"/module/expansion/sso\"},{\"text\":\"敏感词过滤\",\"link\":\"/module/expansion/dfa\"}]}],\"/frontend/tools/\":[{\"text\":\"介绍\",\"link\":\"/frontend/tools/\"},{\"text\":\"打字录入\",\"link\":\"/frontend/tools/typewriting/\"},{\"text\":\"扩展模块\",\"items\":[{\"text\":\"Drawio插件\",\"link\":\"/frontend/tools/expansion/drawio\"}]}],\"/frontend/other/wxapp/\":[{\"text\":\"介绍\",\"link\":\"/frontend/other/wxapp/\"},{\"text\":\"特殊效果\",\"collapsed\":false,\"items\":[{\"text\":\"wxml元素截图\",\"link\":\"/frontend/other/wxapp/wxmlScreenshot\"}]}],\"/server/java/basic/\":[{\"text\":\"介绍\",\"link\":\"/server/java/basic/\"},{\"text\":\"Java基础\",\"items\":[{\"text\":\"语法\",\"link\":\"/server/java/basic/primary/grammar\"},{\"text\":\"IDEA开发工具\",\"link\":\"/server/java/basic/primary/ideaCodeTool\"},{\"text\":\"运算符和表达式\",\"link\":\"/server/java/basic/primary/operatorExpression\"},{\"text\":\"控制语句\",\"link\":\"/server/java/basic/primary/controlStatement\"},{\"text\":\"数组\",\"link\":\"/server/java/basic/primary/array\"},{\"text\":\"关键字\",\"link\":\"/server/java/basic/primary/keyword\"}]},{\"text\":\"Java中级\",\"items\":[{\"text\":\"面向对象\",\"link\":\"/server/java/basic/intermediate/objectOriented\"}]}]},\"docFooter\":{\"prev\":\"上一页\",\"next\":\"下一页\"},\"outline\":{\"level\":[2,4],\"label\":\"当前页大纲\"},\"returnToTopLabel\":\"返回顶部\",\"lastUpdatedText\":\"最后更新时间\",\"search\":{\"provider\":\"local\",\"options\":{\"locales\":{\"root\":{\"translations\":{\"button\":{\"buttonText\":\"搜索文档\",\"buttonAriaLabel\":\"搜索文档\"},\"modal\":{\"noResultsText\":\"无法找到相关结果\",\"resetButtonTitle\":\"清除查询条件\",\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"切换\",\"closeText\":\"关闭\"}}}}}}},\"socialLinks\":[{\"icon\":\"gitee\",\"link\":\"https://gitee.com/dabai-pear\"},{\"icon\":\"github\",\"link\":\"https://github.com/boatingPear\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>